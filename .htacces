RewriteEngine On
RewriteBase /

# Force HTTPS
RewriteCond %{HTTPS} off
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# Force non-www
RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
RewriteRule ^ https://%1%{REQUEST_URI} [L,R=301]

# Remove trailing slash
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+)/$ /$1 [R=301,L]

# Static pages
RewriteRule ^home$        index.php     [L]
RewriteRule ^about$       about.php     [L]
RewriteRule ^services$    services.php  [L]
RewriteRule ^products$    products.php  [L]
RewriteRule ^contact$     contact.php   [L]

# Dynamic product page
RewriteRule ^products/([0-9]+)/([a-zA-Z0-9\-]+)$ product.php?id=$1&name=$2 [L,QSA]

# Catch-all: redirect undefined URLs to homepage
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^.*$ /index.php [L]
